<script src="/gen/renderer.js"></script>

<polymer-element name="pst-renderer" attributes="shader">
  <template>
    <style>
      @host { * { display: block; } }
      canvas {
        width: 100%;
        height: 100%;
      }
    </style>
    <canvas id="canvas"></canvas>
  </template>
  <script>
    Polymer('pst-renderer', {
      shader: '',
      created: function() {
        var PstRenderer = require('./renderer/index.js');
        var renderer = this.renderer = new PstRenderer();
        renderer.canvas = this.$.canvas;
        renderer.init();
        function step() {
          requestAnimationFrame(step);
          renderer.step();
        }
        requestAnimationFrame(step);
      },
      shaderChanged: function() {
        this.renderer.shader = this.shader;
      }
    });
  </script>
</polymer-element>
