<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="/lib/bower_components/polymer/polymer.min.js"></script>
    <link rel="import" href="/elements/code-mirror.html">
    <link rel="import" href="/elements/pst-renderer.html">
    <link rel="stylesheet" href="/styles/index.css">
  </head>
  <body>
    <div class="editor">
      <code-mirror
        value="point.pos = vec4(rand3(index / count + time), 1.);">
      </code-mirror>
    </div>
    <div class="renderer">
      <pst-renderer></pst-renderer>
    </div>
    <script>
      (function() {
        var cm = document.querySelector('code-mirror');
        cm.addEventListener('valuechange', onShaderSrcChange);

        var renderer = document.querySelector('pst-renderer');

        function onShaderSrcChange(shaderSrc) {
          renderer.shader = shaderSrc;
        }
      }());
    </script>
  </body>
</html>
